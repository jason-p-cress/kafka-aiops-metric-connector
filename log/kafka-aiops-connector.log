2024-05-16 13:08:30,577 INFO     Mediator started at: 16/05/2024 13:08:30

2024-05-16 13:08:30,577 INFO     Metrics to be ignored: 
2024-05-16 13:08:30,577 INFO     Counter/pegged metrics: 
2024-05-16 13:08:30,578 INFO     ifHCOutOctets
2024-05-16 13:08:30,578 INFO     ifOutUcastPkts
2024-05-16 13:08:30,578 INFO     ifInOctets
2024-05-16 13:08:30,578 INFO     ifInDiscards
2024-05-16 13:08:30,578 INFO     ifHCInOctets
2024-05-16 13:08:30,578 INFO     ifOutOctets
2024-05-16 13:08:30,578 INFO     ifOutDiscards
2024-05-16 13:08:30,578 INFO     ifInUcastPkts
2024-05-16 13:08:30,578 DEBUG    Global variables:{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x7fe71de3a890>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': '/home/jcress/sevone-watson-datachannel-2024/kafka-aiops-metric-connector/python/./kafka-aiops-metric-connector.py', '__cached__': None, 'sys': <module 'sys' (built-in)>, 'gzip': <module 'gzip' from '/usr/lib64/python3.11/gzip.py'>, 'urllib': <module 'urllib' from '/usr/lib64/python3.11/urllib/__init__.py'>, 'base64': <module 'base64' from '/usr/lib64/python3.11/base64.py'>, 'DatumReader': <class 'avro.io.DatumReader'>, 'logging': <module 'logging' from '/usr/lib64/python3.11/logging/__init__.py'>, 'queue': <module 'queue' from '/usr/lib64/python3.11/queue.py'>, 'socket': <module 'socket' from '/usr/lib64/python3.11/socket.py'>, 'ssl': <module 'ssl' from '/usr/lib64/python3.11/ssl.py'>, 'time': <module 'time' (built-in)>, 'threading': <module 'threading' from '/usr/lib64/python3.11/threading.py'>, 'datetime': <class 'datetime.datetime'>, 'Consumer': <class 'cimpl.Consumer'>, 'KafkaError': <class 'cimpl.KafkaError'>, 'Producer': <class 'cimpl.Producer'>, 'AdminClient': <class 'confluent_kafka.admin.AdminClient'>, 'io': <module 'io' (frozen)>, 'json': <module 'json' from '/usr/lib64/python3.11/json/__init__.py'>, 'os': <module 'os' (frozen)>, 're': <module 're' from '/usr/lib64/python3.11/re/__init__.py'>, 'signal': <module 'signal' from '/usr/lib64/python3.11/signal.py'>, 'writeZipFile': <function writeZipFile at 0x7fe71c64bba0>, 'shutdownHandler': <function shutdownHandler at 0x7fe71882c0e0>, 'reconfigHandler': <function reconfigHandler at 0x7fe718868c20>, 'loadProperties': <function loadProperties at 0x7fe718868cc0>, 'loadMetricsIgnore': <function loadMetricsIgnore at 0x7fe7188691c0>, 'loadCounters': <function loadCounters at 0x7fe718869260>, 'acked': <function acked at 0x7fe718869300>, 'produceMetric': <function produceMetric at 0x7fe7188693a0>, 'postMetric': <function postMetric at 0x7fe718869440>, 'logTimeDelta': <function logTimeDelta at 0x7fe7188694e0>, 'logTimeDeltaCron': <function logTimeDeltaCron at 0x7fe718869580>, 'fastAvroDecode': <function fastAvroDecode at 0x7fe718869620>, 'writeRawJson': <function writeRawJson at 0x7fe7188696c0>, 'kafkaQueueReader': <function kafkaQueueReader at 0x7fe718869760>, 'publishQueueReader': <function publishQueueReader at 0x7fe718869800>, 'kafkaReader': <function kafkaReader at 0x7fe7188698a0>, 'setupFilePaths': <function setupFilePaths at 0x7fe718869940>, 'setupLogging': <function setupLogging at 0x7fe7188699e0>, 'configProperties': <function configProperties at 0x7fe718869a80>, 'mediatorBinDir': '/home/jcress/sevone-watson-datachannel-2024/kafka-aiops-metric-connector/python/./kafka-aiops-metric-connector.py', 'mediatorHome': '/home/jcress/sevone-watson-datachannel-2024/kafka-aiops-metric-connector', 'ignoreMetrics': set(), 'counterMetrics': {'ifHCOutOctets', 'ifOutUcastPkts', 'ifInOctets', 'ifInDiscards', 'ifHCInOctets', 'ifOutOctets', 'ifOutDiscards', 'ifInUcastPkts'}, 'sourceKafkaDataFormat': 'JSON', 'sourceKafkaTopicName': 'sdb', 'sourceKafkaServers': 'localhost:9092', 'sourceKafkaSSL': 'false', 'transformerLibrary': 'tlMeerkat', 'watsonProductTarget': 'aiops', 'publishType': 'rest', 'watsonKafkaTopicName': 'metrics', 'watsonKafkaSSL': 'false', 'watsonMetricGroup': 'sevone', 'watsonTopicAggInterval': '5', 'watsonTenantId': 'cfd95b7e-3bc7-4006-a4a8-a73a79c71255', 'watsonRestRoute': 'https://<clustername>/aiops/api/app/metric-api/v1/metrics', 'watsonUser': 'admin', 'watsonApiKey': '----- api key -------', 'watsonKafkaServers': 'watsonserver:9092', 'watsonTopicName': 'ZABBIX', 'restMediationServiceAuthentication': 'true', 'restMediationServiceUsername': 'system', 'restMediationServicePassword': 'pi-rest-mediation-password', 'restMediationServiceProtocol': 'http', 'restMediationServiceHost': 'localhost', 'restMediationServicePort': '8197', 'logUniqueIndicators': 'false', 'logUniqueResources': 'false', 'loggingLevel': 'DEBUG', 'logRawJson': 'true', 'datachannelProps': {'sourceKafkaDataFormat': 'JSON', 'sourceKafkaTopicName': 'sdb', 'sourceKafkaServers': 'localhost:9092', 'sourceKafkaSSL': 'false', 'transformerLibrary': 'tlMeerkat', 'watsonProductTarget': 'aiops', 'publishType': 'rest', 'watsonKafkaTopicName': 'metrics', 'watsonKafkaSSL': 'false', 'watsonMetricGroup': 'sevone', 'watsonTopicAggInterval': '5', 'watsonTenantId': 'cfd95b7e-3bc7-4006-a4a8-a73a79c71255', 'watsonRestRoute': 'https://<clustername>/aiops/api/app/metric-api/v1/metrics', 'watsonUser': 'admin', 'watsonApiKey': '----- api key -------', 'watsonKafkaServers': 'watsonserver:9092', 'watsonTopicName': 'ZABBIX', 'restMediationServiceAuthentication': 'true', 'restMediationServiceUsername': 'system', 'restMediationServicePassword': 'pi-rest-mediation-password', 'restMediationServiceProtocol': 'http', 'restMediationServiceHost': 'localhost', 'restMediationServicePort': '8197', 'logUniqueIndicators': 'false', 'logUniqueResources': 'false', 'loggingLevel': 'DEBUG', 'logRawJson': 'true'}}
2024-05-16 13:08:30,578 DEBUG    datachannelProps: {'sourceKafkaDataFormat': 'JSON', 'sourceKafkaTopicName': 'sdb', 'sourceKafkaServers': 'localhost:9092', 'sourceKafkaSSL': 'false', 'transformerLibrary': 'tlMeerkat', 'watsonProductTarget': 'aiops', 'publishType': 'rest', 'watsonKafkaTopicName': 'metrics', 'watsonKafkaSSL': 'false', 'watsonMetricGroup': 'sevone', 'watsonTopicAggInterval': '5', 'watsonTenantId': 'cfd95b7e-3bc7-4006-a4a8-a73a79c71255', 'watsonRestRoute': 'https://<clustername>/aiops/api/app/metric-api/v1/metrics', 'watsonUser': 'admin', 'watsonApiKey': '----- api key -------', 'watsonKafkaServers': 'watsonserver:9092', 'watsonTopicName': 'ZABBIX', 'restMediationServiceAuthentication': 'true', 'restMediationServiceUsername': 'system', 'restMediationServicePassword': 'pi-rest-mediation-password', 'restMediationServiceProtocol': 'http', 'restMediationServiceHost': 'localhost', 'restMediationServicePort': '8197', 'logUniqueIndicators': 'false', 'logUniqueResources': 'false', 'loggingLevel': 'DEBUG', 'logRawJson': 'true'}
2024-05-16 13:08:30,579 DEBUG    sourceKafkaServers = localhost:9092
2024-05-16 13:08:30,579 DEBUG    restMediationServiceAuthentication is true
2024-05-16 13:08:30,579 DEBUG    REST authentication required
2024-05-16 13:08:30,579 DEBUG    Auth header is: Basic c3lzdGVtOnBpLXJlc3QtbWVkaWF0aW9uLXBhc3N3b3Jk
2024-05-16 13:08:30,579 DEBUG    watsonTopicAggInterval = 5
2024-05-16 13:08:30,579 DEBUG    sourceKafkaTopicName = sdb
2024-05-16 13:08:30,579 DEBUG    datachannel product target is: aiops
2024-05-16 13:08:30,579 DEBUG    AIOps tenant id is: cfd95b7e-3bc7-4006-a4a8-a73a79c71255
2024-05-16 13:08:30,579 INFO     Source Kafka SSL not requested
2024-05-16 13:08:30,579 DEBUG    sourceKafkaDataFormat = JSON
2024-05-16 13:08:30,579 DEBUG    Validate publisher type and if Kafka, configure Kafka properties, and if REST, start a publishQueueThread
2024-05-16 13:08:30,579 DEBUG    Source Kafka connection does not require SSL
2024-05-16 13:08:30,580 DEBUG    kafka settings are: {'bootstrap.servers': 'localhost:9092', 'group.id': 'waiopsMetric-Restgroup', 'client.id': 'waiopsMetric-Restclient-1@ibm-hybrid-noi-onprem1.fyre.ibm.com', 'enable.auto.commit': False, 'session.timeout.ms': 6000, 'socket.timeout.ms': 3000, 'default.topic.config': {'auto.offset.reset': 'latest'}}
2024-05-16 13:08:30,583 INFO     ==============================================
2024-05-16 13:08:30,583 DEBUG    =   Verifying kafka topic - listing topics   =
2024-05-16 13:08:30,583 INFO     ==============================================
2024-05-16 13:08:30,602 DEBUG    Successfully listed topics in the source kafka. Topics returned: {'sdb': TopicMetadata(sdb, 3 partitions), '__consumer_offsets': TopicMetadata(__consumer_offsets, 50 partitions)}
2024-05-16 13:08:30,602 DEBUG    Subscribing to source kafka topic
2024-05-16 13:08:30,603 DEBUG    Source Kafka Topic available.
2024-05-16 13:08:30,604 INFO     Transformer library to use is tlMeerkat
2024-05-16 13:08:30,604 DEBUG    Adding transformers path at /home/jcress/sevone-watson-datachannel-2024/kafka-aiops-metric-connector/python/transformers/
2024-05-16 13:08:30,607 DEBUG    publishType is 'rest' or file, let's start a publishQueueThread
2024-05-16 13:08:30,608 INFO     Starting queue reader for rest publishing
2024-05-16 13:08:30,608 INFO     Starting datachannel, 90 seconds to next interval...
